{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,sBAmBAE,eAAeC,EAAaC,EAASC,EAAM,IAQnC,OANmBA,EAAIC,KACvBJ,MAAOK,IAEH,MAAMC,QAXlBN,eAAoCE,EAASG,GACzC,MAAME,EAAaC,EAAAC,IAAIP,EAAS,kBAAkBG,EAAMK,QACxD,aAAaF,EAAAG,YAAYJ,EAAYF,GASAO,CAAqBV,EAASG,GAC3D,OAAOG,EAAAK,eAAeL,EAAAC,IAAIP,EAASI,EAAeG,IAAIK,cDtBlE,MAAMC,EAAOC,SAASC,eAAe,SAI/BC,GADYH,EAAKZ,IACNY,EAAKL,MAChBS,EAAkBJ,EAAKK,YACvBC,EAAYN,EAAKO,MASjBC,GARYR,EAAKS,MACFT,EAAKU,SACRV,EAAKW,OACLX,EAAKY,OACJZ,EAAKa,IAICZ,SAASa,cAAc,qBAC3CC,EAA0Bd,SAASa,cAAc,2BAEtDd,EAAKgB,iBAAiB,UAAU/B,MAAOgC,IAGnC,GAFAA,EAAGC,iBAEoB,KAAnBf,EAASgB,OAA0C,KAA1Bf,EAAgBe,OAAoC,KAApBb,EAAUa,MACnEC,MAAM,yDACH,CAGH,MAAMhC,EAAMY,EAAKZ,IAAIiC,MACf1B,EAAOK,EAAKL,KAAKwB,MACjBd,EAAcL,EAAKK,YAAYc,MAC/BZ,EAAQP,EAAKO,MAAMY,MACnBV,EAAQT,EAAKS,MAAMU,MACnBT,EAAWV,EAAKU,SAASS,MACzBR,EAASX,EAAKW,OAAOQ,MACrBP,EAASZ,EAAKY,OAAOO,MAE3B,IAAIG,EAAU,GAEd,GAAIlC,EAAImC,OAAQ,CAEZ,MAAMC,QAAuBtC,EAAaJ,EAAAK,QAAS,IAAIC,IACvDkC,QAAgBG,QAAQC,IAAIF,GAIhC,MAAMG,EAAc,CAChBvC,IAAKkC,EAhDjB3B,KAiDYA,EAjDZU,YAkDYA,EAlDZE,MAmDYA,EAnDZE,MAoDYA,EApDZC,SAqDYA,EArDZC,OAsDYA,EAtDZC,OAuDYA,SCpDZ3B,eAA0B2C,EAAIC,GAE1B,UACU7C,EAAA8C,OAAO9C,EAAA+C,WAAWH,EAAI,YAAaC,GACzCG,QAAQC,IAAI,+BACd,MAAOC,GACLF,QAAQC,IAAIC,IDiDNC,CAAWrD,EAAA8C,GAAID,GACrBP,MAAM,qCAQdZ,EAAiBQ,iBAAiB,UAAU,KAExC,MAAMoB,EAAW5B,EAAiBa,MAElC,IAAKe,IAAaA,EAASb,OAEzB,YADAR,EAAwBsB,IAAM,IAIhC,MAAMC,EAAgBF,EAAS,GAEzBG,EAAYC,IAAIC,gBAAgBH,GAEtCvB,EAAwBsB,IAAME","sources":["src/createProduct.js","src/functions/addProducts.js"],"sourcesContent":["import { db, storage } from '../src/functions/app';\r\nimport { addProduct, uploadImages } from \"../src/functions/addProducts\";\r\n\r\nconst form = document.getElementById(\"forms\");\r\n\r\n\r\nconst itemImage = form.img;\r\nconst itemName = form.name;\r\nconst itemDescription = form.description;\r\nconst itemPrice = form.price;\r\nconst itemStock = form.stock;\r\nconst itemCategory = form.category;\r\nconst itemVegan = form.vegano;\r\nconst itemSugar = form.azucar;\r\nconst itemSubmit = form.btn;\r\n\r\n\r\n\r\nconst $form__item__img = document.querySelector(\"#form__item__img\"),\r\n     $imagenPrevisualizacion = document.querySelector(\"#imagenPrevisualizacion\");\r\n\r\nform.addEventListener(\"submit\", async (ev) => {\r\n    ev.preventDefault();\r\n\r\n    if (itemName.value === '' || itemDescription.value === '' || itemPrice.value === '') {\r\n        alert(\"Hay campos sin llenar. Por favor llena los campos\");\r\n    } else {\r\n\r\n\r\n        const img = form.img.files;\r\n        const name = form.name.value;\r\n        const description = form.description.value;\r\n        const price = form.price.value;\r\n        const stock = form.stock.value;\r\n        const category = form.category.value;\r\n        const vegano = form.vegano.value;\r\n        const azucar = form.azucar.value;\r\n\r\n        let gallery = [];\r\n\r\n        if (img.length) {\r\n            //upload images to firebase\r\n            const uploadedImages = await uploadImages(storage, [...img]);\r\n            gallery = await Promise.all(uploadedImages)\r\n\r\n        }\r\n\r\n        const newProducts = {\r\n            img: gallery,\r\n            name,\r\n            description,\r\n            price,\r\n            stock,\r\n            category,\r\n            vegano,\r\n            azucar\r\n        }\r\n\r\n        await addProduct(db, newProducts);\r\n        alert(\"Producto añadido éxitosamente\");\r\n\r\n    }\r\n\r\n\r\n\r\n});\r\n\r\n$form__item__img.addEventListener(\"change\", () => {\r\n    // Los archivos seleccionados, pueden ser muchos o uno\r\n    const archivos = $form__item__img.files;\r\n    // Si no hay archivos salimos de la función y quitamos la imagen\r\n    if (!archivos || !archivos.length) {\r\n      $imagenPrevisualizacion.src = \"\";\r\n      return;\r\n    }\r\n    // Ahora tomamos el primer archivo, el cual vamos a previsualizar\r\n    const primerArchivo = archivos[0];\r\n    // Lo convertimos a un objeto de tipo objectURL\r\n    const objectURL = URL.createObjectURL(primerArchivo);\r\n    // Y a la fuente de la imagen le ponemos el objectURL\r\n    $imagenPrevisualizacion.src = objectURL;\r\n  });\r\n","import { addDoc, collection } from \"firebase/firestore\";\r\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\"\r\n\r\nasync function addProduct(db, product) {\r\n\r\n    try {\r\n        await addDoc(collection(db, \"products\"), product);\r\n        console.log(\"product added successfully!\");\r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n\r\n}\r\nasync function imageUploadReference(storage, image) {\r\n    const storageRef = ref(storage, `prducts/images/${image.name}`);\r\n    return await uploadBytes(storageRef, image);\r\n}\r\n\r\n\r\nasync function uploadImages(storage, img = []) {\r\n\r\n    const uploadedImages = img.map(\r\n        async (image)=> {\r\n            //console.log(image)\r\n            const imageReference = await imageUploadReference(storage, image);\r\n            return getDownloadURL(ref(storage, imageReference.ref.fullPath));\r\n        });\r\n        return uploadedImages;\r\n    \r\n\r\n\r\n}\r\n\r\nexport { addProduct, uploadImages }\r\n\r\n\r\n"],"names":["$4Bu0d","parcelRequire","$etBjH","async","$331792ce22f80d45$export$633f5b6169e2b910","storage","img","map","image","imageReference","storageRef","$aYguL","ref","name","uploadBytes","$331792ce22f80d45$var$imageUploadReference","getDownloadURL","fullPath","$456a6b571f55f25c$var$form","document","getElementById","$456a6b571f55f25c$var$itemName","$456a6b571f55f25c$var$itemDescription","description","$456a6b571f55f25c$var$itemPrice","price","$456a6b571f55f25c$var$$form__item__img","stock","category","vegano","azucar","btn","querySelector","$456a6b571f55f25c$var$$imagenPrevisualizacion","addEventListener","ev","preventDefault","value","alert","files","gallery","length","uploadedImages","Promise","all","newProducts","db","product","addDoc","collection","console","log","e","$331792ce22f80d45$export$7caf006d7b64ee15","archivos","src","primerArchivo","objectURL","URL","createObjectURL"],"version":3,"file":"createProduct.91e2e052.js.map"}